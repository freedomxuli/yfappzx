<!DOCTYPE html>
<html class="ui-page-login">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>登录密码修改</title>
		<link href="../css/mui.min.css" rel="stylesheet" />
		<style>
			body{
				background-color: #FFFFFF;
			}
			.top-box{
				display: flex;
				flex-direction: row;
				align-items:center;
				background-color: #0078B9;
			}
			.top-box-item{
				flex: 1;
			}
			.top-box-item2{
				flex: 1.5;
			}
			.top-box-item-left{
				text-align: left;
			}
			.top-box-item-center{
				text-align: left;
			}
			.top-div-span{
				color: #FFFFFF;
				font-weight: bold;
				font-size: 1.2rem;
			}
			.top-div-img{
				height:1rem;
				vertical-align: middle;
			}
		</style>
	</head>
	<body>
<!--		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">重置密码</h1>
		</header>-->
		<header class="mui-bar mui-bar-nav top-box">
			<div class="top-box-item mui-action-back">
				<img class="top-div-img" src="../img/buycontent/back.png" />
			</div>
			<div class="top-box-item2 top-box-item-center">
				<span class="top-div-span">重置密码</span>
			</div>
		</header>
		<div class="mui-content">
			<form class="mui-input-group">
				<ul class="mui-table-view">
					<li class="mui-table-view-cell">
						<div class="mui-input-row">
							<label>登录密码:</label>
							<input id='UserPassword' type="password" class="mui-input-clear mui-input" placeholder="请输入密码">
						</div>
					</li>
					<li class="mui-table-view-cell">
						<div class="mui-input-row">
							<label>确认密码:</label>
							<input id='UserPassword_confirm' type="password" class="mui-input-clear mui-input" placeholder="请确认密码">
						</div>
					</li>
				</ul>
			</form>
			<div class="mui-content-padded">
				<button id='chongzhimima' class="mui-btn mui-btn-block mui-btn-primary">重置密码</button>
			</div>
		</div>
		<script src="../js/mui.min.js"></script>
		<script src="../js/zepto.js"></script>
		<script src="../js/reconnecting-websocket.min.js"></script>
		<script src="../js/stomp.min.js"></script>
		<script src="../js/sockjs.min.js"></script>
		<script src="../js/app.js"></script>
		<script type="text/javascript">
			(function ($, doc) {
				var psd = doc.getElementById('UserPassword');
				var psd_confirm = doc.getElementById('UserPassword_confirm');
			    doc.getElementById('chongzhimima').addEventListener('tap',function(event){
			    		if(!psd.value)
			    		{
			    			$.toast('请输入密码');
		                return;
			    		}
			    		if(!psd_confirm.value)
			    		{
			    			$.toast('请输入确认密码');
		                return;
			    		}
			    		if(psd.value!=psd_confirm.value)
			    		{
			    			$.toast('重置密码必须和密码一致！');
		                return;
			    		}
			    		var data = {
		            		queryData:{
							tradeCode:'changepassword',
							username:localStorage.getItem('username'),
							password:psd.value
						}
		            }
					lnjoy.GetDataByPost(data,function(rs){
						if(rs.hasOwnProperty("success"))
						{
							mui.toast('重置密码成功！');
							mui.back();
						}else
						{
							mui.toast('重置密码失败！'+rs.details);
							return;
						}
					});
			    });
		    }(mui, document));
		</script>
	</body>
</html>